{"version":3,"sources":["../src/State.js"],"names":["State","name","initialState","reducerParts","init","reducerKeys","Object","keys","length","reducer","makeSubState","makeReducerMap","actionTypes","actions","undefined","reduce","result","key","makeActionType","makeAction","subState","reinit","assign"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;;;IAEqBA,K;;;AAEnB,iBAAYC,IAAZ,EAAkBC,YAAlB,EAAmD;AAAA,QAAnBC,YAAmB,uEAAJ,EAAI;;AAAA;;AAAA,8GAC3CF,IAD2C,EACrCC,YADqC,EACvBC,YADuB;;AAGjD,UAAKC,IAAL;AAHiD;AAIlD;;;;2BAEM;AAAA;;AACL,UAAMC,cAAcC,OAAOC,IAAP,CAAY,KAAKJ,YAAjB,CAApB;AACA,UAAGE,YAAYG,MAAZ,GAAqB,CAAxB,EAA2B;AACzB,aAAKC,OAAL,GAAe;AAAA,iBAAM,OAAKP,YAAX;AAAA,SAAf,CADyB,CACc;AACxC,OAFD,MAGK,IAAG,KAAKC,YAAL,CAAkBE,YAAY,CAAZ,CAAlB,oCAAH,EAA+D;AAClE;AACA,aAAKI,OAAL,GAAe,KAAKC,YAAL,CAAkB,KAAKP,YAAvB,CAAf;AACD,OAHI,MAIA;AACH;AACA,aAAKM,OAAL,GAAe,8BAAY,KAAKP,YAAjB,EAA+B,KAAKS,cAAL,CAAoB,KAAKR,YAAzB,CAA/B,CAAf;AACD;AACF;;;6BAEQ;AACP,WAAKS,WAAL,GAAmB,EAAnB;AACA,WAAKC,OAAL,GAAe,EAAf;AACA,WAAKJ,OAAL,GAAeK,SAAf;AACA,WAAKV,IAAL;AACD;;;mCAEcD,Y,EAAc;AAAA;;AAC3B,aAAOG,OAAOC,IAAP,CAAYJ,YAAZ,EAA0BY,MAA1B,CAAiC,UAACC,MAAD,EAASC,GAAT,EAAiB;AACvD,eAAKC,cAAL,CAAoBD,GAApB;AACA,eAAKE,UAAL,CAAgBF,GAAhB;;AAEAD,eAAO,OAAKJ,WAAL,CAAiBK,GAAjB,CAAP,IAAgCd,aAAac,GAAb,CAAhC;AACA,eAAOD,MAAP;AACD,OANM,EAMJ,EANI,CAAP;AAOD;;;iCAEYb,Y,EAAc;AAAA;;AACzB,aAAOG,OAAOC,IAAP,CAAYJ,YAAZ,EAA0BY,MAA1B,CAAiC,UAACC,MAAD,EAASC,GAAT,EAAiB;AACvD,YAAMG,WAAWjB,aAAac,GAAb,CAAjB;AACAG,iBAASnB,IAAT,GAAgB,OAAKA,IAArB;AACAmB,iBAASC,MAAT;AACAf,eAAOgB,MAAP,CAAc,OAAKV,WAAnB,EAAgCQ,SAASR,WAAzC;AACAN,eAAOgB,MAAP,CAAc,OAAKT,OAAnB,EAA4BO,SAASP,OAArC;;AAEAG,eAAOC,GAAP,IAAcG,SAASX,OAAvB;AACA,eAAOO,MAAP;AACD,OATM,EASJ,EATI,CAAP;AAUD;;;;;;kBAnDkBhB,K","file":"State.js","sourcesContent":["import AbstractState from './AbstractState'\r\nimport {makeReducer} from './makeReducer'\r\n\r\nexport default class State extends AbstractState {\r\n\r\n  constructor(name, initialState, reducerParts = {}) {\r\n    super(name, initialState, reducerParts)\r\n\r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    const reducerKeys = Object.keys(this.reducerParts)\r\n    if(reducerKeys.length < 1) {\r\n      this.reducer = () => this.initialState // don't know why you want static state, but there you go\r\n    }\r\n    else if(this.reducerParts[reducerKeys[0]] instanceof AbstractState) {\r\n      // 'Nested' State\r\n      this.reducer = this.makeSubState(this.reducerParts)\r\n    }\r\n    else {\r\n      // 'Value' State\r\n      this.reducer = makeReducer(this.initialState, this.makeReducerMap(this.reducerParts))\r\n    }\r\n  }\r\n\r\n  reinit() {\r\n    this.actionTypes = {}\r\n    this.actions = {}\r\n    this.reducer = undefined\r\n    this.init()\r\n  }\r\n\r\n  makeReducerMap(reducerParts) {\r\n    return Object.keys(reducerParts).reduce((result, key) => {\r\n      this.makeActionType(key)\r\n      this.makeAction(key)\r\n\r\n      result[this.actionTypes[key]] = reducerParts[key]\r\n      return result\r\n    }, {})\r\n  }\r\n\r\n  makeSubState(reducerParts) {\r\n    return Object.keys(reducerParts).reduce((result, key) => {\r\n      const subState = reducerParts[key]\r\n      subState.name = this.name\r\n      subState.reinit()\r\n      Object.assign(this.actionTypes, subState.actionTypes)\r\n      Object.assign(this.actions, subState.actions)\r\n\r\n      result[key] = subState.reducer\r\n      return result\r\n    }, {})\r\n  }\r\n\r\n}\r\n"]}